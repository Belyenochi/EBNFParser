
from Misakawa.ObjectRegex.Node import Ref, AstParser, SeqParser, LiteralParser, MetaInfo
from token import token 
import re
namespace     = globals()
recurSearcher = set()
NEWLINE = LiteralParser('\n', name = 'NEWLINE')
true = AstParser([LiteralParser.Eliteral('t', name = '\'t\''),LiteralParser.Eliteral('r', name = '\'r\''),LiteralParser.Eliteral('u', name = '\'u\''),LiteralParser.Eliteral('e', name = '\'e\'')], name = 'true')
false = AstParser([LiteralParser.Eliteral('f', name = '\'f\''),LiteralParser.Eliteral('a', name = '\'a\''),LiteralParser.Eliteral('l', name = '\'l\''),LiteralParser.Eliteral('s', name = '\'s\''),LiteralParser.Eliteral('e', name = '\'e\'')], name = 'false')
null = AstParser([LiteralParser.Eliteral('n', name = '\'n\''),LiteralParser.Eliteral('u', name = '\'u\''),LiteralParser.Eliteral('l', name = '\'l\''),LiteralParser.Eliteral('l', name = '\'l\'')], name = 'null')
Number = AstParser([SeqParser([LiteralParser('\d', name = '\'\d\'')], atleast = 1),SeqParser([LiteralParser('\.', name = '\'\.\''),SeqParser([LiteralParser('\d', name = '\'\d\'')], atleast = 1)], atmost = 1)], name = 'Number')
Const = AstParser([Ref('true')],[Ref('false')],[Ref('null')],[Ref('Number')], name = 'Const')
Space = LiteralParser('\s+', name = 'Space')
S = LiteralParser('[^\n"\\\\]', name = 'S')
Escape = LiteralParser('\\\\', name = 'Escape')
EscapeStr = AstParser([Ref('Escape'),LiteralParser.Eliteral('"', name = '\'\"\'')], name = 'EscapeStr')
Str = AstParser([LiteralParser.Eliteral('"', name = '\'\"\''),SeqParser([SeqParser([Ref('S')],[Ref('Space')],[Ref('EscapeStr')], atleast = 1, atmost = 1)]),LiteralParser.Eliteral('"', name = '\'\"\'')], name = 'Str')
KeyValue = AstParser([Ref('Atom'),LiteralParser.Eliteral(':', name = '\':\''),SeqParser([Ref('Space')]),Ref('Atom')], name = 'KeyValue', toIgnore={'Space'})
Dict = AstParser([LiteralParser.Eliteral('{', name = '\'{\''),SeqParser([Ref('Space')]),SeqParser([Ref('KeyValue'),SeqParser([SeqParser([Ref('Space')]),LiteralParser.Eliteral(',', name = '\',\''),SeqParser([Ref('Space')]),Ref('KeyValue')])], atmost = 1),SeqParser([Ref('Space')]),LiteralParser.Eliteral('}', name = '\'}\'')], name = 'Dict', toIgnore={'Space'})
List = AstParser([LiteralParser.Eliteral('[', name = '\'[\''),SeqParser([Ref('Space')]),SeqParser([Ref('Atom'),SeqParser([SeqParser([Ref('Space')]),LiteralParser.Eliteral(',', name = '\',\''),SeqParser([Ref('Space')]),Ref('Atom')])], atmost = 1),SeqParser([Ref('Space')]),LiteralParser.Eliteral(']', name = '\']\'')], name = 'List', toIgnore={'Space'})
Atom = AstParser([Ref('Const')],[Ref('Str')],[Ref('Dict')],[Ref('List')],[SeqParser([Ref('Space')]),Ref('Atom'),SeqParser([Ref('Space')])], name = 'Atom', toIgnore={'Space'})
true.compile(namespace, recurSearcher)
false.compile(namespace, recurSearcher)
null.compile(namespace, recurSearcher)
Number.compile(namespace, recurSearcher)
Const.compile(namespace, recurSearcher)
EscapeStr.compile(namespace, recurSearcher)
Str.compile(namespace, recurSearcher)
KeyValue.compile(namespace, recurSearcher)
Dict.compile(namespace, recurSearcher)
List.compile(namespace, recurSearcher)
Atom.compile(namespace, recurSearcher)
